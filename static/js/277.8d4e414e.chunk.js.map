{"version":3,"file":"static/js/277.8d4e414e.chunk.js","mappings":"0NAmCA,EA/BmB,SAAC,GAA2B,IAAzBA,EAAwB,EAAxBA,OAAQC,EAAgB,EAAhBA,UACtBC,EAAWF,EAAOG,IAAI,SAC5B,GAA0BC,EAAAA,EAAAA,UAASF,GAAY,IAA/C,eAAOG,EAAP,KAAcC,EAAd,KAQA,OACE,kBAAMC,UAAU,GAAGC,MAAO,CAAEC,aAAc,QAAUC,SAPjC,SAAAC,GACnBA,EAAMC,iBACDP,GACLJ,EAAU,CAAEY,MAAOR,GACpB,EAGC,WACE,kBACEE,UAAU,GACVC,MAAO,CAAEM,MAAO,SAChBC,KAAK,OACLC,KAAK,QACLC,MAAOZ,EACPa,YAAY,sBACZC,SAAU,SAAAR,GAAK,OAAIL,EAASK,EAAMS,OAAOH,MAA1B,KAEjB,mBAAQF,KAAK,SAAb,sBAGL,E,oCC6CD,EAnEsB,SAAC,GAA2B,IAAzBf,EAAwB,EAAxBA,OAAQC,EAAgB,EAAhBA,UACzBY,EAAQb,EAAOG,IAAI,SAGzB,GAA4BC,EAAAA,EAAAA,UAAS,IAArC,eAAOiB,EAAP,KAAeC,EAAf,KACA,GAAwClB,EAAAA,EAAAA,UAAS,GAAjD,eAAOmB,EAAP,KAAqBC,EAArB,KACA,GAAwBpB,EAAAA,EAAAA,UAAS,GAAjC,eAAOqB,EAAP,KAAaC,EAAb,MASAC,EAAAA,EAAAA,YAAU,WACR,GAAKd,EAAL,EAGEe,EAAAA,EAAAA,IAAiBf,EAAOY,GACrBI,MAAK,SAAAC,GACJR,GAAU,SAAAD,GAAM,OACL,IAATI,EAAaK,EAAKC,QAAlB,kBAAgCV,IAAhC,OAA2CS,EAAKC,SADlC,IAGP,IAATN,GAAcD,EAAgBM,EAAKE,cACpC,IACAC,OAAM,SAAAC,GAAG,OAAIC,QAAQC,IAAIF,EAAhB,GAVI,CAenB,GAAE,CAACT,EAAMZ,IAEV,IAAMwB,GAAWC,EAAAA,EAAAA,MAEjB,OACE,iCACE,eAAI9B,MAAO,CAAEC,aAAc,QAA3B,SACGY,EAAOkB,KAAI,SAAAC,GAAK,OACf,eAAmBhC,MAAO,CAAEC,aAAc,UAA1C,UACE,SAAC,KAAD,CAAMgC,GAAE,kBAAaD,EAAME,IAAMC,MAAO,CAAEC,KAAMP,GAAhD,UACE,yBACGG,EAAMK,OACP,kBAAMrC,MAAO,CAAEsC,WAAY,SAAUC,MAAO,QAA5C,cAEGC,UAAc,OAALR,QAAK,IAALA,OAAA,EAAAA,EAAOS,gBAAP,OAAuBT,QAAvB,IAAuBA,OAAvB,EAAuBA,EAAOU,kBACtC,oBAHJ,aAJGV,EAAME,GADA,MAiBlBrB,EAAO8B,OAAS,GAAK9B,EAAO8B,OAAS5B,IACpC,SAAC6B,EAAA,EAAD,CAAQC,QA/CK,WAEjBpD,EAAU,CAAEY,MAAAA,IACZa,GAAQ,SAAAD,GAAI,OAAIA,EAAO,CAAX,GACb,MA+CF,ECnDD,EAXe,WACb,OAAkC6B,EAAAA,EAAAA,MAAlC,eAAOtD,EAAP,KAAeuD,EAAf,KAEA,OACE,iBAAKhD,UAAU,cAAf,WACE,SAAC,EAAD,CAAYP,OAAQA,EAAQC,UAAWsD,KACvC,SAAC,EAAD,CAAevD,OAAQA,EAAQC,UAAWsD,MAG/C,C","sources":["components/SearchForm/SearchForm.jsx","components/MoviesGallery/MoviesGallery.jsx","pages/Movies/Movies.jsx"],"sourcesContent":["import { useState } from 'react';\nimport PropTypes from 'prop-types';\n//import css from \"./SearchForm.module.scss\";\n\nconst SearchForm = ({ search, setSearch }) => {\n  const oldQuery = search.get('query');\n  const [input, setInput] = useState(oldQuery || '');\n\n  const handleSubmit = event => {\n    event.preventDefault();\n    if (!input) return;\n    setSearch({ query: input });\n  };\n\n  return (\n    <form className=\"\" style={{ marginBottom: '1rem' }} onSubmit={handleSubmit}>\n      <input\n        className=\"\"\n        style={{ width: '300px' }}\n        type=\"text\"\n        name=\"input\"\n        value={input}\n        placeholder=\"Enter movie name...\"\n        onChange={event => setInput(event.target.value)}\n      />\n      <button type=\"submit\">Search</button>\n    </form>\n  );\n};\n\nSearchForm.propTypes = {\n  search: PropTypes.object.isRequired,\n  setSearch: PropTypes.func.isRequired,\n};\n\nexport default SearchForm;\n","import { useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport Button from '../Button/Button';\nimport { getMoviesByQuery } from 'utils/fetchAPI';\nimport { Link, useLocation } from 'react-router-dom';\n\nconst MoviesGallery = ({ search, setSearch }) => {\n  const query = search.get('query');\n  //  const page = Number(search.get(\"page\"));\n\n  const [movies, setMovies] = useState([]);\n  const [totalResults, setTotalResults] = useState(0);\n  const [page, setPage] = useState(1); //getting page from state nor from search\n  // const [isLoading, setIsLoading] = useState(false);\n\n  const updatePage = () => {\n    //  setSearch({ query, page: page + 1 });\n    setSearch({ query });\n    setPage(page => page + 1);\n  };\n\n  useEffect(() => {\n    if (!query) return;\n    const updateSearch = () => {\n      //    setIsLoading(true);\n      getMoviesByQuery(query, page)\n        .then(data => {\n          setMovies(movies =>\n            page === 1 ? data.results : [...movies, ...data.results]\n          );\n          page === 1 && setTotalResults(data.total_results);\n        })\n        .catch(err => console.log(err));\n      //       .finally(() => setIsLoading(false));\n    };\n\n    updateSearch();\n  }, [page, query]);\n\n  const location = useLocation();\n\n  return (\n    <>\n      <ul style={{ marginBottom: '1rem' }}>\n        {movies.map(movie => (\n          <li key={movie.id} style={{ marginBottom: '0.5rem' }}>\n            <Link to={`/movies/${movie.id}`} state={{ from: location }}>\n              <p>\n                {movie.title}\n                <span style={{ marginLeft: '0.5rem', color: 'grey' }}>\n                  (\n                  {parseInt(movie?.release_date || movie?.first_air_date) ||\n                    'Once apone a time'}\n                  )\n                </span>\n              </p>\n            </Link>\n          </li>\n        ))}\n      </ul>\n\n      {movies.length > 0 && movies.length < totalResults && (\n        <Button onClick={updatePage} />\n      )}\n    </>\n  );\n};\n\nMoviesGallery.propTypes = {\n  search: PropTypes.object.isRequired,\n  setSearch: PropTypes.func.isRequired,\n};\n\nexport default MoviesGallery;\n","import { useSearchParams } from 'react-router-dom';\nimport SearchForm from 'components/SearchForm/SearchForm';\nimport MoviesGallery from 'components/MoviesGallery/MoviesGallery';\n\nconst Movies = () => {\n  const [search, setSearchParams] = useSearchParams();\n\n  return (\n    <div className=\"movies-page\">\n      <SearchForm search={search} setSearch={setSearchParams} />\n      <MoviesGallery search={search} setSearch={setSearchParams} />\n    </div>\n  );\n};\n\nexport default Movies;\n"],"names":["search","setSearch","oldQuery","get","useState","input","setInput","className","style","marginBottom","onSubmit","event","preventDefault","query","width","type","name","value","placeholder","onChange","target","movies","setMovies","totalResults","setTotalResults","page","setPage","useEffect","getMoviesByQuery","then","data","results","total_results","catch","err","console","log","location","useLocation","map","movie","to","id","state","from","title","marginLeft","color","parseInt","release_date","first_air_date","length","Button","onClick","useSearchParams","setSearchParams"],"sourceRoot":""}